query Dashboard(
  $siteId: ID!
  $dateRange: DateRangeInput
  $filter: FilterInput
  $topPagesPaging: PagingInput!
  $referrersPaging: PagingInput!
  $browsersPaging: PagingInput!
  $devicesPaging: PagingInput!
  $countriesPaging: PagingInput!
) {
  dashboard(siteId: $siteId, dateRange: $dateRange, filter: $filter) {
    ...DashboardStatsFields
  }
}

query Realtime($siteId: ID!, $activePagesPaging: PagingInput!) {
  realtime(siteId: $siteId) {
    ...RealtimeStatsFields
  }
}

query Events($siteId: ID!, $dateRange: DateRangeInput, $filter: FilterInput, $limit: Int, $offset: Int) {
  events(siteId: $siteId, dateRange: $dateRange, filter: $filter, limit: $limit, offset: $offset) {
    total
    events {
      ...EventFields
    }
  }
}

query EventCounts($siteId: ID!, $dateRange: DateRangeInput, $filter: FilterInput, $paging: PagingInput!) {
  eventCounts(siteId: $siteId, dateRange: $dateRange, filter: $filter, paging: $paging) {
    ...EventCountFields
  }
}

query ChartData(
  $siteId: ID!
  $dateRange: DateRangeInput
  $filter: FilterInput
  $bucket: TimeBucket
  $limit: Int
  $offset: Int
) {
  dashboard(siteId: $siteId, dateRange: $dateRange, filter: $filter) {
    dailyStats(bucket: $bucket, limit: $limit, offset: $offset) {
      ...DailyStatsFields
    }
  }
}

fragment PageStatsFields on PageStats {
  path
  views
  visitors
}

fragment ReferrerStatsFields on ReferrerStats {
  referrer
  visitors
}

fragment BrowserStatsFields on BrowserStats {
  browser
  visitors
}

fragment DeviceStatsFields on DeviceStats {
  device
  visitors
}

fragment CountryStatsFields on CountryStats {
  country
  visitors
}

fragment ActivePageStatsFields on ActivePageStats {
  path
  visitors
}

fragment DailyStatsFields on DailyStats {
  date
  visitors
  pageViews
  sessions
}

fragment EventPropertyFields on EventProperty {
  key
  value
}

fragment EventFields on Event {
  id
  name
  path
  definition {
    id
    name
  }
  createdAt
  properties {
    ...EventPropertyFields
  }
}

fragment EventCountFields on EventCount {
  count
  event {
    ...EventFields
  }
}

fragment RealtimeStatsFields on RealtimeStats {
  visitors
  activePages(paging: $activePagesPaging) {
    ...ActivePageStatsFields
  }
}

fragment DashboardStatsFields on DashboardStats {
  visitors
  pageViews
  sessions
  bounceRate
  avgDuration
  topPages(paging: $topPagesPaging) {
    total
    items {
      ...PageStatsFields
    }
  }
  topReferrers(paging: $referrersPaging) {
    total
    items {
      ...ReferrerStatsFields
    }
  }
  browsers(paging: $browsersPaging) {
    ...BrowserStatsFields
  }
  devices(paging: $devicesPaging) {
    total
    totalVisitors
    items {
      ...DeviceStatsFields
    }
  }
  countries(paging: $countriesPaging) {
    total
    totalVisitors
    items {
      ...CountryStatsFields
    }
  }
}
